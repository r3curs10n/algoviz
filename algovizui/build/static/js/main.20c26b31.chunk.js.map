{"version":3,"sources":["traces/sample.tsx","ui/stack/ProgramObjectUI.tsx","ui/stack/ProgramStackUI.tsx","vm/VirtualMachine.tsx","ui/stack/ProgramHeapGraphUI.tsx","ui/stack/ProgramHeapUI.tsx","samples/Programs.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["trace","ProgramObjectUI","props","isNullOrUndefined","object","ptrValue","className","modifiedAtStep","executionStepIndex","name","toString","href","onClick","highlightedPtr","ProgramStackFrameUI","locals","frame","args","forEach","val","key","_","push","onVmObjectClick","vmEngine","maybeReturn","returnVal","methodName","ProgramStackUI","ListGroup","stack","frames","map","ListGroupItem","VmObject","boolValue","numberValue","stringValue","this","e","x","isPtr","fromPtr","undefined","fromString","fromNumber","fromBool","VmStackFrame","Map","has","get","vars","v","k","set","VmStack","getTopFrame","pop","length","VmHeapObject","ptr","type","listObject","mapObject","VmHeap","storage","namedReferences","Set","arg","add","local","VmEngine","heap","programTrace","programInfer","executionLineNumber","enableFastForward","log","infer","reset","getAllVariables","isAboutToEnterFunction","funcName","info","function","some","inference","data","nextAndSkipFunction","nextStepInternal","op","depth","movedForward","Object","entries","wrappedArgs","fromVal","pushFrame","line","obj","popFrame","id","Array","isArray","z","members","pos","curList","curMap","delete","executeStep","updateNamedReferences","stepToGo","i","nextStep","filter","inferences","localVarValue","localVarName","genericInference","var","getVariable","array","indexVarName","indexVarValue","indexDimension","index","visjs","require","ProgramHeapGraphUI","visjsDomRef","graph","options","React","createRef","layout","hierarchical","direction","sortMethod","Network","current","nodes","update","color","background","ref","annotations","rows","find","member","join","edges","consumed","namedReferencesMap","getTopFrameNamedReferencesMap","getMemberPointerAnnotationsFor","label","getLabelFor","shape","font","multi","annotation","from","to","arrows","DataSet","ui","Component","OneDArray","_vmEngine","every","getArrayIndexAnnotationsFor","arr","Table","bordered","size","idx","indices","TwoDArray","child","is","cols","Math","max","list","rowUi","Dict","ProgramHeapUI","elements","addUI","r","getUI","Card","Body","graphUI","createUI","ProgramList","route","code","App","state","monaco","decorations","timer","incrementExecutionStep","prevStep","newDecorations","revealLineInCenter","range","Monaco","isWholeLine","deltaDecorations","setState","lineNumber","DummyTrace","isEditing","isWaiting","isPaused","clearInterval","setInterval","hasExecutionFinished","maybeError","error","Alert","style","marginTop","variant","msg","maybeProgressBar","ProgressBar","now","editor","height","language","value","theme","editorDidMount","readOnly","Form","Row","Col","xs","ButtonGroup","Button","disabled","play","pause","Spinner","animation","getValue","superagent","post","send","then","res","status","alert","body","AppContainer","useState","showAbout","setShowAbout","handleCloseAbout","forceRefresh","Navbar","bg","Brand","Toggle","aria-controls","Collapse","Nav","NavDropdown","title","p","Item","Link","Container","fluid","path","Modal","show","onHide","Header","closeButton","Title","Footer","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","message"],"mappings":"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","file":"static/js/main.20c26b31.chunk.js","sourcesContent":["export const trace = {\n  \"infer\": [],\n  \"log\": []\n}\n","import { isNullOrUndefined } from \"util\"\nimport { VmObject } from \"../../vm/VirtualMachine\"\nimport React from 'react'\nimport { BsTag } from \"react-icons/bs\"\n\ninterface ProgramObjectUIProps {\n  name?: string\n  object: VmObject\n  executionStepIndex: number\n  highlightedPtr?: number\n  onClick?: (ptr: number) => void\n}\n\nexport const ProgramObjectUI = (props: ProgramObjectUIProps) => {\n  if (isNullOrUndefined(props.object.ptrValue)) {\n    return <div className={props.object.modifiedAtStep === props.executionStepIndex ? \"highlightedLine\" : \"\"}>\n      {(isNullOrUndefined(props.name) ? '' : (props.name + ': ')) + props.object.toString()}\n    </div>\n  } else {\n    return <div className={props.object.modifiedAtStep === props.executionStepIndex ? \"highlightedLine\" : \"\"}>\n      {isNullOrUndefined(props.name) ? '' : (props.name + ': ')}\n      <a href=\"#\" onClick={() => {\n        if (props.onClick !== null) {\n          props.onClick(props.object.ptrValue)\n        }\n      }}>\n        {(() => {\n          if (props.object.ptrValue === 0) {\n            return 'None'\n          }\n          if (props.object.ptrValue === -1) {\n            return 'Tuple'\n          }\n          if (props.highlightedPtr === props.object.ptrValue) {\n            return <>{'Show'} <BsTag/></>\n          }\n          return 'Show'\n        })()}\n      </a>\n    </div>\n  }\n}\n","import { VmEngine, VmStackFrame, VmObject } from '../../vm/VirtualMachine'\nimport { ListGroup, ListGroupItem } from 'react-bootstrap'\nimport React from 'react'\nimport { ProgramObjectUI } from './ProgramObjectUI'\nimport { isNullOrUndefined } from 'util'\n\nexport interface ProgramStackUIProps {\n  vmEngine: VmEngine,\n  highlightedPtr: number,\n  onVmObjectClick?: (ptr: number) => void\n}\n\ninterface ProgramStackFrameUIProps {\n  vmEngine: VmEngine,\n  frame: VmStackFrame,\n  highlightedPtr: number,\n  onVmObjectClick?: (ptr: number) => void\n}\n\nconst ProgramStackFrameUI = (props: ProgramStackFrameUIProps) => {\n  const locals = []\n  props.frame.args.forEach((val, key, _) => {\n    locals.push(<ProgramObjectUI highlightedPtr={props.highlightedPtr} name={key} object={val} onClick={props.onVmObjectClick} executionStepIndex={props.vmEngine.executionStepIndex} />)\n  })\n  props.frame.locals.forEach((val, key, _) => {\n    locals.push(<ProgramObjectUI highlightedPtr={props.highlightedPtr} name={key} object={val} onClick={props.onVmObjectClick} executionStepIndex={props.vmEngine.executionStepIndex} />)\n  })\n\n  let maybeReturn = null\n  if (!isNullOrUndefined(props.frame.returnVal)) {\n    maybeReturn = <div>\n      <ProgramObjectUI highlightedPtr={props.highlightedPtr} name=\"Return\" object={props.frame.returnVal} onClick={props.onVmObjectClick} executionStepIndex={props.vmEngine.executionStepIndex} />)\n    </div>\n  }\n\n  return <div>\n    <div>\n    {props.frame.methodName + '()'}\n    </div>\n    <div>\n      {locals}\n    </div>\n    { maybeReturn}\n  </div>\n}\n\nexport const ProgramStackUI = (props: ProgramStackUIProps) => {\n  return <ListGroup>\n    {props.vmEngine.stack.frames.map(frame => {\n      return <ListGroupItem>\n        <ProgramStackFrameUI highlightedPtr={props.highlightedPtr} frame={frame} onVmObjectClick={props.onVmObjectClick} vmEngine={props.vmEngine} />\n      </ListGroupItem>\n    })}\n  </ListGroup>\n}\n","import { isNullOrUndefined } from \"util\"\n\nexport class VmObject {\n  boolValue?: boolean\n  numberValue?: number\n  ptrValue?: number\n  stringValue?: string\n\n  modifiedAtStep?: number\n\n  toString() {\n    if (!isNullOrUndefined(this.boolValue)) {\n      return '' + this.boolValue\n    } else if (!isNullOrUndefined(this.numberValue)) {\n      return '' + this.numberValue\n    } else if (!isNullOrUndefined(this.ptrValue)) {\n      return '#' + this.ptrValue\n    } else if (!isNullOrUndefined(this.stringValue)) {\n      return '\"' + this.stringValue + '\"'\n    }\n    return 'null'\n  }\n\n  static fromBool(val: boolean) {\n    let e = new VmObject()\n    e.boolValue = val\n    return e\n  }\n\n  static fromNumber(val: number) {\n    let e = new VmObject()\n    e.numberValue = val\n    return e\n  }\n\n  static fromPtr(val: number) {\n    let e = new VmObject()\n    e.ptrValue = val\n    return e\n  }\n\n  static fromString(val: string) {\n    let e = new VmObject()\n    e.stringValue = val\n    return e\n  }\n\n  static fromVal(x: Array<any>) {\n    const isPtr = x[0]\n    const val = x[1]\n\n    if (isPtr) {\n      return VmObject.fromPtr(val)\n    }\n\n    if (val == null || val == undefined) {\n      return new VmObject()\n    } else if (typeof val == \"string\") {\n      return VmObject.fromString(val)\n    } else if (typeof val == \"number\") {\n      return VmObject.fromNumber(val)\n    } else if (typeof val == \"boolean\") {\n      return VmObject.fromBool(val)\n    }\n\n    return new VmObject()\n  }\n}\n\nexport class VmStackFrame {\n  methodName: string\n  args: Map<string, VmObject> = new Map()\n  locals: Map<string, VmObject> = new Map()\n  returnVal?: VmObject\n\n  constructor(methodName: string, args: Map<string, VmObject>) {\n    this.methodName = methodName\n    this.args = args\n  }\n\n  getVariable(name: string): VmObject {\n    if (this.locals.has(name)) {\n      return this.locals.get(name)\n    }\n    if (this.args.has(name)) {\n      return this.args.get(name)\n    }\n    return null\n  }\n\n  getAllVariables() {\n    const vars: Map<string, VmObject> = new Map()\n    this.args.forEach((v, k) => vars.set(k, v))\n    this.locals.forEach((v, k) => vars.set(k, v))\n    return vars\n  }\n}\n\nexport class VmStack {\n  frames: Array<VmStackFrame> = []\n\n  pushFrame(frame: VmStackFrame) {\n    this.frames.push(frame)\n  }\n\n  markFrameReturn(val: VmObject) {\n    this.getTopFrame().returnVal = val\n  }\n\n  popFrame() {\n    this.frames.pop()\n  }\n\n  getTopFrame() {\n    return this.frames[this.frames.length  - 1]\n  }\n}\n\ninterface ExecutionStep {\n  op: string,\n  info: any,\n}\n\ninterface ArrayIndexInference {\n  funcName: string,\n  array: string,\n  var: string,\n  index: number\n}\n\nexport interface MemberPointerInference {\n  className: string,\n  member: string\n}\n\ninterface Inference {\n  type: string,\n  data: any\n}\n\ninterface ArrayIndexAnnotation {\n  indexVarName: string,\n  indexVarValue: number,\n  indexDimension: number\n}\n\nexport class VmHeapObject {\n  type: string\n  ptr: number\n  listObject?: Array<VmObject>\n  mapObject?: Map<string, VmObject>\n\n  constructor(ptr: number, type){\n    this.type = type\n    this.ptr = ptr\n  }\n}\n\nexport class VmHeap {\n  storage: Map<number, VmHeapObject>\n  namedReferences: Set<number>\n\n  constructor() {\n    this.storage = new Map()\n    this.namedReferences = new Set()\n  }\n\n  updateNamedReferences(stack: VmStack) {\n    this.namedReferences = new Set()\n    stack.frames.forEach((frame) => {\n      frame.args.forEach((arg) => {\n        if (arg.ptrValue !== null) {\n          this.namedReferences.add(arg.ptrValue)\n        }\n      })\n      frame.locals.forEach((local) => {\n        if (local.ptrValue !== null) {\n          this.namedReferences.add(local.ptrValue)\n        }\n      })\n    })\n  }\n}\n\nexport class VmEngine {\n  stack: VmStack\n  heap: VmHeap\n  programTrace: Array<ExecutionStep>\n  programInfer: Array<Inference>\n  executionStepIndex: number = -1\n  executionLineNumber: number = -1\n  enableFastForward = false\n\n  constructor(trace) {\n    this.programTrace = trace.log\n    this.programInfer = trace.infer\n    this.reset()\n  }\n\n  hasExecutionFinished() {\n    return this.executionStepIndex >= this.programTrace.length\n  }\n\n  getTopFrameNamedReferencesMap() {\n    const map: Map<number, Array<string>> = new Map()\n    if (isNullOrUndefined(this.stack.getTopFrame())) {\n      return map\n    }\n\n    this.stack.getTopFrame().getAllVariables().forEach((v, k) => {\n      if (isNullOrUndefined(v.ptrValue)) {\n        return\n      }\n      if (!map.has(v.ptrValue)) {\n        map.set(v.ptrValue, [])\n      }\n      map.get(v.ptrValue).push(k)\n    })\n    return map\n  }\n\n  nextStep() {\n    if (this.enableFastForward && this.isAboutToEnterFunction()) {\n      const funcName = this.programTrace[this.executionStepIndex + 1].info.function\n      if (this.programInfer.some(inference => inference.type === \"fastForward\" && inference.data.function === funcName)) {\n        this.nextAndSkipFunction()\n        return\n      }\n    }\n    this.nextStepInternal()\n  }\n\n  isAboutToEnterFunction() {\n    if (this.executionStepIndex <= 0) {\n      return false\n    }\n    return this.executionStepIndex + 1 < this.programTrace.length && this.programTrace[this.executionStepIndex + 1].op === \"pushFrame\"\n  }\n\n  nextAndSkipFunction() {\n    if (this.isAboutToEnterFunction()) {\n      let depth = 0\n      let movedForward = false\n      while (true) {\n        if (this.executionStepIndex >= this.programTrace.length) {\n          break\n        }\n        if (this.programTrace[this.executionStepIndex].op === \"pushFrame\") {\n          depth++\n        } else if (this.programTrace[this.executionStepIndex].op === \"popFrame\") {\n          depth--\n          movedForward = true\n        }\n        this.nextStepInternal()\n        if (depth === 0 && movedForward) {\n          break\n        }\n      }\n    }\n  }\n\n  executeStep(e: any) {\n    if (e.op == \"line\") {\n      this.executionLineNumber = e.info\n    } else if (e.op == \"pushFrame\") {\n      const args: Map<string, any> = new Map(Object.entries(e.info.locals))\n      const wrappedArgs: Map<string, VmObject> = new Map()\n      args.forEach((val: any, key: string, _) => {\n        wrappedArgs.set(key, VmObject.fromVal(val))\n      })\n      const frame = new VmStackFrame(e.info.function, wrappedArgs)\n      this.stack.pushFrame(frame)\n      this.executionLineNumber = e.info.line\n    } else if (e.op == \"newLocal\" || e.op == \"updateLocal\") {\n      const obj = VmObject.fromVal(e.info[1])\n      obj.modifiedAtStep = this.executionStepIndex\n      this.stack.getTopFrame().locals.set(e.info[0], obj)\n    } else if (e.op == \"return\") {\n      // this.executionLineNumber = -1\n      this.stack.getTopFrame().returnVal = VmObject.fromVal(e.info)\n      this.stack.getTopFrame().returnVal.modifiedAtStep = this.executionStepIndex\n    } else if (e.op == \"popFrame\") {\n      // this.executionLineNumber = -1\n      this.stack.popFrame()\n    } else if (e.op == \"new\") {\n      const id: number = e.info[0]\n      let obj = new VmHeapObject(id, \"\")\n      if (Array.isArray(e.info[1])) {\n        const val: Array<any> = e.info[1]\n        obj.listObject = val.map((z => VmObject.fromVal(z)))\n        obj.type = \"list\"\n      } else {\n        obj.type = e.info[1].type\n        obj.mapObject = new Map()\n        Object.entries(e.info[1].members).forEach(([key, val]) => {\n          obj.mapObject.set(key, VmObject.fromVal(val as Array<any>))\n        })\n      }\n      this.heap.storage.set(id, obj)\n    } else if (e.op == \"modifyPos\") {\n      const id: number = e.info[0]\n      const pos: number = e.info[1]\n      const val: any = e.info[2]\n      const curList = this.heap.storage.get(id)\n      const obj = VmObject.fromVal(val)\n      obj.modifiedAtStep = this.executionStepIndex\n      if (pos >= curList.listObject.length) {\n        curList.listObject.push(obj)\n      } else {\n        curList.listObject[pos] = obj\n      }\n    } else if (e.op == \"modifyKey\" || e.op == \"addKey\") {\n      const id: number = e.info[0]\n      const key = e.info[1]\n      const val = e.info[2]\n      const curMap = this.heap.storage.get(id)\n      const obj = VmObject.fromVal(val)\n      obj.modifiedAtStep = this.executionStepIndex\n      curMap.mapObject.set(key, obj)\n    } else if (e.op == \"delete\") {\n      this.heap.storage.delete(e.info)\n    } else if (e.op == \"batch\") {\n      e.info.forEach(z => this.executeStep(z))\n    }\n  }\n\n  nextStepInternal() {\n    this.executionStepIndex++\n    if (this.executionStepIndex >= this.programTrace.length) {\n      return false\n    }\n\n    const e = this.programTrace[this.executionStepIndex]\n    this.executeStep(e)\n\n    this.heap.updateNamedReferences(this.stack)\n    return true\n  }\n\n  prevStep() {\n    const stepToGo = this.executionStepIndex - 1\n    this.reset()\n    for (let i = 0; i < stepToGo; i++) {\n      this.nextStep()\n    }\n  }\n\n  reset() {\n    this.stack = new VmStack()\n    this.heap = new VmHeap()\n    this.executionStepIndex = -1\n    this.executionLineNumber = -1\n    this.enableFastForward = false\n  }\n\n  getMemberPointerAnnotationsFor(ptr: number) {\n    const obj = this.heap.storage.get(ptr)\n    return this.programInfer.filter(\n      e => e.type === \"memberPointer\" && e.data.className === obj.type\n    ).map(\n      e => e.data as MemberPointerInference\n    )\n  }\n\n  getArrayIndexAnnotationsFor(ptr: number) {\n    const frame = this.stack.getTopFrame()\n    const inferences: Array<ArrayIndexAnnotation> = []\n    if (isNullOrUndefined(frame)) {\n      return inferences\n    }\n\n    frame.locals.forEach((localVarValue, localVarName) => {\n      this.programInfer.forEach(genericInference => {\n        if (genericInference.type !== \"arrayIndex\") {\n          return\n        }\n        const inference: ArrayIndexInference = genericInference.data\n        if (inference.funcName !== frame.methodName) {\n          return\n        }\n        if (inference.var !== localVarName) {\n          return\n        }\n        if (frame.getVariable(inference.array).ptrValue !== ptr) {\n          return\n        }\n        inferences.push({\n          indexVarName: localVarName,\n          indexVarValue: localVarValue.numberValue,\n          indexDimension: inference.index\n        })\n      })\n    })\n    return inferences\n  }\n}\n","import { VmHeap, VmObject, VmHeapObject, VmEngine, MemberPointerInference } from '../../vm/VirtualMachine'\nimport { ListGroup, ListGroupItem, Table, Card } from 'react-bootstrap'\nimport React from 'react'\nimport 'visjs-network/dist/vis.css'\nimport './heap-graph.css'\nimport { isNullOrUndefined } from 'util'\nconst visjs = require('visjs-network/dist/vis')\n\ninterface ProgramHeapGraphUIProps {\n  vmEngine: VmEngine\n  data: any\n  highlightedPtr: number\n}\n\nexport class ProgramHeapGraphUI extends React.Component<ProgramHeapGraphUIProps> {\n  visjsDomRef: React.RefObject<any>\n  graph: any\n  options: any\n\n  constructor(props: ProgramHeapGraphUIProps) {\n    super(props)\n    this.visjsDomRef = React.createRef()\n    this.options = {\n      layout: {\n        hierarchical: {\n          direction: \"UD\",\n          sortMethod: \"directed\"\n        },\n      },\n    }\n  }\n\n  static getLabelFor(obj: VmHeapObject, annotations: Array<MemberPointerInference>, namedReferences: string[]) {\n    let rows = []\n    obj.mapObject.forEach((val, key) => {\n      if (!annotations.find(e => e.member === key)) {\n        rows.push(`*${key}: ${val.toString()}*`)\n      }\n    })\n\n    let label = rows.length > 0 ? rows.join(\"\\n\") : \"*...*\"\n    return label + (namedReferences.length > 0 ? (\"\\n(\" + namedReferences.join(\", \")) + \")\" : \"\")\n  }\n\n  static createUI(vmEngine: VmEngine, highlightedPtr: number) {\n    const heap = vmEngine.heap\n    const nodes = []\n    const edges = []\n    const consumed = new Set()\n    const namedReferencesMap = vmEngine.getTopFrameNamedReferencesMap()\n    heap.storage.forEach((obj, ptr) => {\n      const annotations = vmEngine.getMemberPointerAnnotationsFor(ptr)\n      if (annotations.length > 0) {\n        consumed.add(ptr)\n        nodes.push({id: ptr, label: ProgramHeapGraphUI.getLabelFor(obj, annotations, namedReferencesMap.get(ptr) ?? []), color: {background: \"#d9e6eb\"}, shape: \"box\", font: {multi: \"md\"}})\n        annotations.forEach(annotation => {\n          if (obj.mapObject.has(annotation.member) && obj.mapObject.get(annotation.member).ptrValue !== 0)\n          edges.push({from: ptr, to: obj.mapObject.get(annotation.member).ptrValue, arrows: \"to\", label: annotation.member})\n        })\n      }\n    })\n    const data = {\n      nodes: new visjs.DataSet(nodes),\n      edges: new visjs.DataSet(edges),\n    }\n    return {\n      consumed: consumed,\n      ui: <ProgramHeapGraphUI data={data} vmEngine={vmEngine} highlightedPtr={highlightedPtr} />\n    }\n  }\n\n  componentDidMount() {\n    this.graph = new visjs.Network(this.visjsDomRef.current, this.props.data, this.options);\n  }\n\n  render() {\n    if (!isNullOrUndefined(this.visjsDomRef.current)) {\n      this.graph = new visjs.Network(this.visjsDomRef.current, this.props.data, this.options);\n      if (!isNullOrUndefined(this.props.data.nodes.get(this.props.highlightedPtr))) {\n        this.props.data.nodes.update([{id: this.props.highlightedPtr, color: {background: \"#AAFFAA\"}}])\n      }\n    }\n    return <div className=\"heap-graph\" ref={this.visjsDomRef}></div>\n  }\n}\n","import { VmHeap, VmObject, VmHeapObject, VmEngine } from '../../vm/VirtualMachine'\nimport { ListGroup, ListGroupItem, Table, Card } from 'react-bootstrap'\nimport React from 'react'\nimport { isNullOrUndefined } from 'util'\nimport { ProgramObjectUI } from './ProgramObjectUI'\nimport { ProgramHeapGraphUI } from './ProgramHeapGraphUI'\nimport '../../App.css'\n\nclass OneDArray {\n  static is(obj: VmHeapObject, _vmEngine: VmEngine) {\n    if (isNullOrUndefined(obj.listObject)) {\n      return false\n    }\n    return obj.listObject.every(e => isNullOrUndefined(e.ptrValue))\n  }\n\n  static getUI(obj: VmHeapObject, vmEngine: VmEngine) {\n    const annotations = vmEngine.getArrayIndexAnnotationsFor(obj.ptr)\n    const arr = obj.listObject\n    const ui = <Table bordered size=\"sm\">\n      <thead>\n        <tr>\n          {arr.map((_, idx) => {\n            const indices = annotations.filter(e => e.indexVarValue === idx && e.indexDimension === 0).map(e => e.indexVarName)\n            const annotation = indices.length > 0 ? '(' + indices.join(\", \") + ')' : \"\"\n            return <th>{`${idx} ${annotation}`}</th>\n          })}\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          {arr.map((e) => {\n            return <td>\n              {\n                <ProgramObjectUI object={e} executionStepIndex={vmEngine.executionStepIndex} />\n              }\n            </td>\n          })}\n        </tr>\n      </tbody>\n    </Table>\n\n    return {\n      consumed: new Set(),\n      ui: ui\n    }\n  }\n}\n\nclass TwoDArray {\n  static is(obj: VmHeapObject, vmEngine: VmEngine) {\n    if (isNullOrUndefined(obj.listObject)) {\n      return false\n    }\n    return obj.listObject.every(child => {\n      if (isNullOrUndefined(child.ptrValue) || !vmEngine.heap.storage.has(child.ptrValue)) {\n        return false\n      }\n      return OneDArray.is(vmEngine.heap.storage.get(child.ptrValue), vmEngine)\n    })\n  }\n\n  static getUI(obj: VmHeapObject, vmEngine: VmEngine) {\n    const arr = obj.listObject\n    const cols = Math.max(...arr.map(e => vmEngine.heap.storage.get(e.ptrValue).listObject.length))\n\n    const annotations = vmEngine.getArrayIndexAnnotationsFor(obj.ptr)\n\n    const rowUi = (idx: number, list: VmHeapObject) => {\n      return <tr>\n        <th>\n          {\n            (() => {\n              const indices = annotations.filter(e => e.indexVarValue === idx && e.indexDimension === 0).map(e => e.indexVarName)\n              const annotation = indices.length > 0 ? '(' + indices.join(\", \") + ')' : \"\"\n              return `${idx} ${annotation}`\n            }\n            )()}\n        </th>\n        {list.listObject.map(e => {\n          return <td>\n            <ProgramObjectUI object={e} executionStepIndex={vmEngine.executionStepIndex} />\n          </td>\n        })}\n      </tr>\n    }\n\n    const ui = <Table bordered size=\"sm\">\n      <thead>\n        <tr>\n          <th>#</th>\n          {Array.from({ length: cols }).map((_, idx) => {\n            const indices = annotations.filter(e => e.indexVarValue === idx && e.indexDimension === 1).map(e => e.indexVarName)\n            const annotation = indices.length > 0 ? '(' + indices.join(\", \") + ')' : \"\"\n            return <th>{`${idx} ${annotation}`}</th>\n          })}\n        </tr>\n      </thead>\n      <tbody>\n        {\n          arr.map((e, idx) => rowUi(idx, vmEngine.heap.storage.get(e.ptrValue)))\n        }\n      </tbody>\n    </Table>\n\n    const consumed = new Set()\n    arr.forEach(e => consumed.add(e.ptrValue))\n\n    return {\n      consumed: consumed,\n      ui: ui\n    }\n  }\n}\n\nclass Dict {\n  static is(obj: VmHeapObject, _vmEngine: VmEngine) {\n    if (isNullOrUndefined(obj.mapObject) || obj.type !== \"dict\") {\n      return false\n    }\n    return true\n  }\n\n  static getUI(obj: VmHeapObject, vmEngine: VmEngine, onVmObjectClick) {\n    const members = obj.mapObject\n    const ui = <Table bordered size=\"sm\">\n      <thead>\n        <tr>\n          <th>Key</th>\n          <th>Value</th>\n        </tr>\n      </thead>\n      <tbody>\n        {(() => {\n          let rows = []\n          members.forEach((val, key) => {\n            rows.push(<tr>\n              <td>{key}</td>\n              <td><ProgramObjectUI object={val} executionStepIndex={vmEngine.executionStepIndex} onClick={onVmObjectClick} /></td>\n            </tr>)\n          })\n          return rows\n        })()}\n      </tbody>\n    </Table>\n\n    return {\n      consumed: new Set(),\n      ui: ui\n    }\n  }\n}\n\ninterface ProgramHeapUIProps {\n  vmEngine: VmEngine,\n  highlightedPtr: number,\n  onVmObjectClick: (ptr: number) => void\n}\n\nconst createUIFor = (obj: VmHeapObject, vmEngine: VmEngine, onVmObjectClick) => {\n  if (OneDArray.is(obj, vmEngine)) {\n    return OneDArray.getUI(obj, vmEngine)\n  }\n  if (TwoDArray.is(obj, vmEngine)) {\n    return TwoDArray.getUI(obj, vmEngine)\n  }\n  if (Dict.is(obj, vmEngine)) {\n    return Dict.getUI(obj, vmEngine, onVmObjectClick)\n  }\n  return {\n    consumed: new Set(),\n    ui: <div>Object {`#${obj.ptr} (${obj.type})`}</div>\n  }\n}\n\nexport const ProgramHeapUI = (props: ProgramHeapUIProps) => {\n  const heap = props.vmEngine.heap\n\n  const consumed = new Set()\n  const elements = []\n\n  const addUI = (ptr: number, e: VmHeapObject) => {\n    const r = createUIFor(e, props.vmEngine, props.onVmObjectClick)\n    r.consumed.forEach(v => consumed.add(v))\n    elements.push(\n      <Card>\n        <Card.Body className={props.highlightedPtr === ptr ? \"highlightedBackground\" : null}>\n          {r.ui}\n        </Card.Body>\n      </Card>\n    )\n  }\n\n  const graphUI = ProgramHeapGraphUI.createUI(props.vmEngine, props.highlightedPtr)\n  graphUI.consumed.forEach(v => consumed.add(v))\n  if (graphUI.consumed.size > 0) {\n    elements.push(\n      <Card>\n        <Card.Body>\n          {graphUI.ui}\n        </Card.Body>\n      </Card>\n    )\n  }\n\n  heap.namedReferences.forEach(ptr => {\n    if (!heap.storage.has(ptr) || consumed.has(ptr)) {\n      return;\n    }\n    consumed.add(ptr)\n    addUI(ptr, heap.storage.get(ptr))\n  })\n\n  // Add UI for unnamed refs if they haven't been consumed\n  heap.storage.forEach((obj, ptr) => {\n    if (!consumed.has(ptr)) {\n      addUI(ptr, obj)\n    }\n  })\n\n  return <div>\n    {elements}\n  </div>\n}\n","export interface ProgramEntry {\n  code: string,\n  name: string,\n  route: string,\n}\n\nexport const ProgramList: Array<ProgramEntry> = [\n  {\n    route: \"/programs/reverse-linked-list\",\n    name: \"Reverse Linked List\",\n    code: `\nclass ListNode:\n    \"\"\"\n    'pointers' instructs the visualizer to draw specified members\n    as arrows to other objects\n\n    pointers: next\n    \"\"\"\n    def __init__(self):\n        self.data = 0\n        self.next = None\n\ndef constructList():\n    \"\"\"\n    'fast-forward' instructs the runner to skip\n    step by step visualization in autoplay mode\n\n    fast-forward\n    \"\"\"\n    head = ListNode()\n    head.data = 1\n\n    cur = head\n    for i in range (2, 5):\n        cur.next = ListNode()\n        cur.next.data = i\n        cur = cur.next\n    return head\n\ndef reverseList(head):\n    if head.next is None:\n        return (head, head)\n    newHead, newTail = reverseList(head.next)\n    head.next = None\n    newTail.next = head\n    return newHead, head\n\ndef main():\n    myList = constructList()\n    newHead, newTail = reverseList(myList)\n    return 0\n`\n  },\n  {\n    route: \"/programs/inorder-traversal\",\n    name: \"Inorder Traversal\",\n    code: `\n\nclass TreeNode:\n    \"\"\"\n    'pointers' instructs the visualizer to draw specified members\n    as arrows to other objects\n\n    pointers: left, right\n    \"\"\"\n    def __init__(self, data):\n        self.data = data\n        self.left = None\n        self.right = None\n\ndef traverseInOrder(outList, root):\n    if root.left is not None:\n        traverseInOrder(outList, root.left)\n    outList.append(root.data)\n    if root.right is not None:\n        traverseInOrder(outList, root.right)\n\ndef constructTree():\n    \"\"\"\n    'fast-forward' instructs the runner to skip\n    step by step visualization in autoplay mode\n\n    fast-forward\n    \"\"\"\n    root = TreeNode(0)\n    root.left = TreeNode(11)\n    root.right = TreeNode(12)\n    root.left.left = TreeNode(21)\n    root.left.right = TreeNode(22)\n    return root\n\ndef main():\n    root = constructTree()\n    outList = []\n    traverseInOrder(outList, root)\n    return 0\n`\n  },\n  {\n    route: \"/programs/insertion-sort\",\n    name: \"Insertion Sort\",\n    code: `\ndef insertionSort(v):\n    \"\"\"\n    'index' instructs the visualizer to draw the specified\n    local variables as indexes for the specified array\n\n    index: v[i]\n    index: v[j]\n    \"\"\"\n    i = 0\n    while i < len(v) - 1:\n        j = i + 1\n        while j >= 1:\n            if v[j] < v[j-1]:\n                v[j-1], v[j] = v[j], v[j-1]\n                j -= 1\n            else:\n                break\n        i += 1\n\ndef main():\n    v = [4, 3, 2, 1]\n    insertionSort(v)\n    return 0\n`\n  },\n  {\n      route: \"/programs/longest-increasing-subsequence\",\n      name: \"DP: Longest Increasing Subsequence\",\n      code: `\ndef longestCommonSubsequence(x, y):\n    \"\"\"\n    'index' instructs the visualizer to draw the specified\n    local variables as indexes for the specified array\n\n    index: dp[i][j]\n    index: x[i]\n    index: y[j]\n    \"\"\"\n    m = len(x)\n    n = len(y)\n\n    dp = [[0]*(n+1) for i in range(m+1)]\n\n    for i in range(m+1):\n        for j in range(n+1):\n            if i==0 or j==0:\n                dp[i][j] = 0\n            elif x[i-1] == y[j-1]:\n                dp[i][j] = dp[i-1][j-1] + 1\n            else:\n                dp[i][j] = max(dp[i-1][j], dp[i][j-1])\n\n    return dp[m][n]\n\ndef main():\n    x = [\"A\", \"G\", \"G\", \"T\"]\n    y = [\"G\", \"X\", \"T\", \"X\"]\n    lcs = longestCommonSubsequence(x, y)\n    return 0\n`\n  }\n]\n","import React, { useState } from 'react';\nimport './App.css';\nimport { trace as DummyTrace } from './traces/sample'\nimport { ProgramStackUI } from './ui/stack/ProgramStackUI';\nimport { BsArrowLeft, BsArrowRight, BsArrowBarRight, BsPlay, BsPause, BsArrowCounterclockwise } from 'react-icons/bs'\nimport { VmEngine } from './vm/VirtualMachine';\nimport { Button, ButtonGroup, Navbar, NavbarBrand, Nav, NavLink, Container, Row, Col, Form, Spinner, Tooltip, OverlayTrigger, Popover, Alert, NavDropdown, FormControl, ProgressBar, Modal } from 'react-bootstrap'\nimport Editor from \"@monaco-editor/react\";\nimport * as Monaco from 'monaco-editor/esm/vs/editor/editor.main';\nimport { ProgramHeapUI } from './ui/stack/ProgramHeapUI';\nimport superagent from 'superagent'\nimport { isNullOrUndefined } from 'util';\nimport { ProgramList } from './samples/Programs'\nimport { LinkContainer } from \"react-router-bootstrap\"\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nconst AppContainer = () => {\n  const [showAbout, setShowAbout] = useState(false);\n\n  const handleCloseAbout = () => setShowAbout(false);\n  const handleShowAbout = () => setShowAbout(true);\n  return (\n    <Router forceRefresh>\n      <Navbar bg=\"dark\" variant=\"dark\">\n        <Navbar.Brand href=\"/\">Gnutella</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"mr-auto\">\n            <NavDropdown title=\"Sample Programs\" id=\"basic-nav-dropdown\">\n              {\n                ProgramList.map(p => {\n                  return <LinkContainer to={p.route}><NavDropdown.Item>{p.name}</NavDropdown.Item></LinkContainer>\n                })\n              }\n            </NavDropdown>\n            <Nav.Link href=\"#\" onClick={handleShowAbout}>About</Nav.Link>\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n      <div className=\"padded-container\">\n        <Container fluid >\n          <Switch>\n            {\n              ProgramList.map(p => {\n                return <Route path={p.route}>\n                  <App code={p.code} />\n                </Route>\n              })\n            }\n            <Route path=\"/\">\n              <App code={ProgramList[0].code} />\n            </Route>\n          </Switch>\n        </Container>\n      </div>\n      <Modal show={showAbout} onHide={handleCloseAbout}>\n        <Modal.Header closeButton>\n          <Modal.Title>Gnutella</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Container>\n            <Row className=\"padding-15\">\n              Hi fellow programmer, Gnutella is a tool for visualizing code execution. Hope you like it!\n            </Row>\n            <Row className=\"padding-15\">\n          Author:&nbsp;<a href=\"https://www.linkedin.com/in/shreyas-basarge-b4ba4653/\">Shreyas</a>&nbsp;(<a href=\"mailto:shreyas.basarge@gmail.com\">email</a>)\n            </Row>\n          </Container>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleCloseAbout}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </Router>\n  )\n}\n\ninterface AppProps {\n  code: string\n}\n\ninterface State {\n  lineNumber: number\n  highlightedPtr: number\n  isEditing: boolean\n  isWaiting: boolean\n  isPaused: boolean\n  code: string\n  trace: any\n}\n\nclass App extends React.Component<AppProps> {\n  vmEngine: VmEngine\n  state: State\n  monaco: any\n  decorations: any\n  timer: any\n\n  constructor(props: AppProps) {\n    super(props)\n    this.vmEngine = new VmEngine(DummyTrace)\n    this.state = {\n      lineNumber: -1,\n      highlightedPtr: 0,\n      isEditing: true,\n      isWaiting: false,\n      isPaused: true,\n      code: props.code,\n      trace: DummyTrace\n    }\n    this.decorations = []\n  }\n\n  pause() {\n    this.setState({isPaused: true})\n    this.vmEngine.enableFastForward = false\n    if (!isNullOrUndefined(this.timer)) {\n      clearInterval(this.timer)\n    }\n  }\n\n  play() {\n    this.setState({isPaused: false})\n    this.vmEngine.enableFastForward = true\n    this.timer = setInterval(() => {\n      if (!this.vmEngine.hasExecutionFinished()) {\n        this.incrementExecutionStep(1)\n      }\n    }, 1000 /* ms */)\n  }\n\n  incrementExecutionStep = (val: number) => {\n    if (val === 0) {\n      this.vmEngine.reset()\n    } else if (val === 1) {\n      this.vmEngine.nextStep()\n    } else if (val === -1) {\n      this.vmEngine.prevStep()\n    } else if (val === 10) {\n      this.vmEngine.nextAndSkipFunction()\n    }\n    const line = this.vmEngine.executionLineNumber\n    let newDecorations = []\n    if (line > 0) {\n      this.monaco.revealLineInCenter(line);\n      newDecorations = [\n        {\n          range: new Monaco.Range(line, 1, line, 1),\n          options: {\n            isWholeLine: true,\n            className: 'highlightedLine',\n          }\n        }\n      ]\n    }\n    this.decorations = this.monaco.deltaDecorations(this.decorations, newDecorations)\n    this.setState({ lineNumber: this.vmEngine.executionLineNumber })\n  }\n\n  render() {\n    const onVmObjectClick = ptr => {\n      this.setState({ highlightedPtr: ptr })\n    }\n    const stack = <ProgramStackUI highlightedPtr={this.state.highlightedPtr} vmEngine={this.vmEngine} onVmObjectClick={onVmObjectClick} />\n\n    const heap = <ProgramHeapUI vmEngine={this.vmEngine} highlightedPtr={this.state.highlightedPtr} onVmObjectClick={onVmObjectClick} />\n\n    const handleEditorDidMount = (_, editor) => {\n      this.monaco = editor\n    }\n\n    const enterEditMode = () => {\n      this.decorations = this.monaco.deltaDecorations(this.decorations, [])\n      this.setState({ isEditing: true, isWaiting: false })\n      this.pause()\n    }\n\n    const enterRunMode = () => {\n      const code: string = this.monaco.getValue()\n      this.setState({ isEditing: false, isWaiting: true, code: code, trace: [] })\n      superagent\n        .post('/trace')\n        .send({ code: code })\n        .then(res => {\n          if (this.state.isWaiting === false) {\n            return\n          }\n          if (res.status !== 200) {\n            alert(res.status)\n          } else {\n            this.vmEngine = new VmEngine(res.body)\n            this.setState({ trace: res.body, isWaiting: false })\n            this.play()\n          }\n        })\n    }\n\n    const getRunControls = () => {\n      if (this.state.isEditing === false && this.state.isWaiting == false) {\n        return <ButtonGroup>\n          <Button onClick={() => { this.incrementExecutionStep(0) }} disabled={!this.state.isPaused} ><BsArrowCounterclockwise />Restart</Button>\n          <Button onClick={() => { this.incrementExecutionStep(-1) }} disabled={!this.state.isPaused} ><BsArrowLeft />Previous</Button>\n          <Button onClick={() => { this.state.isPaused ? this.play() : this.pause() }}>\n            { this.state.isPaused ? <><BsPlay />{'Play'}</> : <><BsPause />{'Pause'}</> }\n          </Button>\n          <Button onClick={() => { this.incrementExecutionStep(1) }} disabled={!this.state.isPaused} ><BsArrowRight />Next</Button>\n          <Button onClick={() => { this.incrementExecutionStep(10) }} disabled={!this.state.isPaused || !this.vmEngine.isAboutToEnterFunction()} ><BsArrowBarRight /> Step Over Function</Button>\n        </ButtonGroup>\n      } else if (this.state.isWaiting === true) {\n        return <Spinner animation=\"border\" />\n      }\n      return <></>\n    }\n\n    const maybeError = !this.state.isEditing && !this.state.isWaiting && !isNullOrUndefined(this.state.trace.error) && (this.state.trace.error.type !== \"runtime\" || this.vmEngine.executionStepIndex >= this.vmEngine.programTrace.length) ? <Alert style={{ marginTop: \"15px\" }} key=\"error\" variant=\"danger\">\n      {this.state.trace.error.msg}\n    </Alert> : null\n\n    const maybeProgressBar = !this.state.isEditing && !this.state.isWaiting ? <ProgressBar style={{ marginTop: \"15px\" }} now={100.0 * Math.max(this.vmEngine.executionStepIndex, 0) / this.vmEngine.programTrace.length} /> : null\n\n    const editor = <>\n      <Editor\n        height=\"70vh\"\n        language=\"python\"\n        value={this.state.code}\n        theme={this.state.isEditing ? \"dark\" : \"light\"}\n        editorDidMount={handleEditorDidMount}\n        options={{ readOnly: !this.state.isEditing }}\n      />\n      <Form className=\"padded-container\">\n        <Form.Row className=\"align-items-center\">\n          <Col xs=\"auto\">{getRunControls()}</Col>\n          <Col xs=\"auto\">\n            {\n              this.state.isEditing ? <Button onClick={enterRunMode}>Run</Button> : <Button onClick={enterEditMode} disabled={!this.state.isPaused} >Edit</Button>\n            }\n          </Col>\n        </Form.Row>\n      </Form>\n      {maybeProgressBar}\n      {maybeError}\n    </>\n\n    return (\n      <>\n        <Row>\n          <Col xs=\"5\">\n            {editor}\n          </Col>\n          <Col xs=\"2\">\n            {!this.state.isEditing && !this.state.isWaiting ? stack : <></>}\n          </Col>\n          <Col>\n            {!this.state.isEditing && !this.state.isWaiting ? heap : <></>}\n          </Col>\n        </Row>\n      </>\n    );\n  }\n}\n\nexport default AppContainer;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'bootstrap/dist/css/bootstrap.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}